<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CycleCare - Pantauan Siklus Menstruasi</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            animation: fadeIn 0.8s ease-in;
        }

        h1 {
            color: #1976d2;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .tagline {
            color: #666;
            font-size: 1.1em;
        }

        .disclaimer {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 30px;
            font-size: 0.9em;
            color: #856404;
        }

        .card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            animation: slideUp 0.6s ease-out;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }

        .card h2 {
            color: #1976d2;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 500;
        }

        input[type="date"],
        input[type="number"],
        select,
        textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e8e8e8;
            border-radius: 10px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        input[type="date"]:focus,
        input[type="number"]:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #1976d2;
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        button {
            background: linear-gradient(135deg, #1976d2 0%, #2196f3 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(25, 118, 210, 0.3);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(25, 118, 210, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .result-section {
            display: none;
            animation: fadeIn 0.6s ease-in;
        }

        .phase-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .phase-card {
            background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid #e8e8e8;
            transition: all 0.3s ease;
        }

        .phase-card.active {
            border-color: #1976d2;
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            box-shadow: 0 8px 25px rgba(25, 118, 210, 0.2);
        }

        .phase-card h3 {
            color: #1976d2;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .phase-info {
            font-size: 0.95em;
            color: #555;
            line-height: 1.6;
        }

        .phase-info strong {
            color: #333;
            display: block;
            margin-top: 10px;
        }

        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .info-box h3 {
            color: #1976d2;
            margin-bottom: 10px;
        }

        .success-box {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            color: #155724;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            color: #856404;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab-btn {
            background: #f8f9fa;
            color: #666;
            border: 2px solid #e8e8e8;
            padding: 12px 25px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #1976d2 0%, #2196f3 100%);
            color: white;
            border-color: #1976d2;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2em;
            }

            .card {
                padding: 20px;
            }

            .phase-cards {
                grid-template-columns: 1fr;
            }
        }

        .consultation-response {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
        }

        .consultation-response h4 {
            color: #2e7d32;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Pantauan Siklus Menstruasi</h1>
            <p class="tagline">Oleh : Ahmad Robi Faro'id</p>
            <p class="tagline" style="font-size: 0.9em; color: #666;">Fakultas Ilmu Komputer - Universitas Jember</p>
        </header>

        <div class="disclaimer">
            <strong>Disclaimer:</strong> Website ini bersifat edukatif dan bukan pengganti diagnosis atau konsultasi medis profesional. Untuk masalah kesehatan serius, silakan konsultasikan dengan dokter.
        </div>

        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('tracker')">Pantau Siklus</button>
            <button class="tab-btn" onclick="switchTab('check')">Cek Normalitas</button>
            <button class="tab-btn" onclick="switchTab('consult')">Konsultasi</button>
        </div>

        <!-- Tab 1: Tracker -->
        <div id="tracker-tab" class="tab-content active">
            <div class="card">
                <h2>Input Data Siklus Anda</h2>
                <div class="input-group">
                    <label for="lastPeriod">Tanggal Haid Terakhir:</label>
                    <input type="date" id="lastPeriod" required>
                </div>
                <div class="input-group">
                    <label for="cycleLength">Lama Siklus (hari):</label>
                    <input type="number" id="cycleLength" value="28" min="21" max="35">
                    <small style="color: #666; display: block; margin-top: 5px;">Rata-rata siklus normal: 21-35 hari</small>
                </div>
                <button onclick="calculateCycle()">Hitung Siklus Saya</button>
            </div>

            <div id="results" class="result-section">
                <div class="card">
                    <h2>Prediksi Siklus Anda</h2>
                    <div id="prediction-info"></div>
                </div>

                <div class="card">
                    <h2>Fase Menstruasi Anda</h2>
                    <div class="phase-cards" id="phase-cards"></div>
                </div>
            </div>
        </div>

        <!-- Tab 2: Check Normality -->
        <div id="check-tab" class="tab-content">
            <div class="card">
                <h2>Cek Normalitas Siklus</h2>
                <div class="input-group">
                    <label for="prevPeriod">Tanggal Haid Sebelumnya:</label>
                    <input type="date" id="prevPeriod" required>
                </div>
                <div class="input-group">
                    <label for="currPeriod">Tanggal Haid Sekarang:</label>
                    <input type="date" id="currPeriod" required>
                </div>
                <button onclick="checkNormality()">Cek Normalitas</button>
                <div id="normality-result"></div>
            </div>
        </div>

        <!-- Tab 3: Consultation -->
        <div id="consult-tab" class="tab-content">
            <div class="card">
                <h2>Konsultasi Edukatif</h2>
                <p style="color: #666; margin-bottom: 20px;">Pilih topik yang ingin Anda ketahui lebih lanjut:</p>
                <div class="input-group">
                    <label for="consultTopic">Pilih Topik:</label>
                    <select id="consultTopic">
                        <option value="">-- Pilih Topik --</option>
                        <option value="irregular">Siklus Tidak Teratur</option>
                        <option value="pain">Nyeri Haid</option>
                        <option value="pms">PMS (Premenstrual Syndrome)</option>
                        <option value="heavy">Haid Berlebihan</option>
                        <option value="nutrition">Nutrisi Selama Siklus</option>
                        <option value="exercise">Olahraga dan Siklus</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="consultQuestion">Pertanyaan Tambahan (Opsional):</label>
                    <textarea id="consultQuestion" placeholder="Tuliskan pertanyaan Anda di sini..."></textarea>
                </div>
                <button onclick="submitConsultation()">Dapatkan Informasi</button>
                <div id="consult-result" class="consultation-response"></div>
            </div>
        </div>
    </div>

    <script>
        const phaseData = {
            menstrual: {
                name: 'Fase Menstruasi',
                days: '1-5',
                description: 'Fase di mana lapisan rahim luruh dan keluar sebagai darah menstruasi.',
                mood: 'Cenderung lelah, mood rendah di awal, membaik di akhir fase',
                energy: 'Energi rendah, butuh istirahat lebih',
                recommendations: {
                    food: 'Makanan kaya zat besi (bayam, daging merah, kacang-kacangan), air hangat',
                    activity: 'Yoga ringan, stretching, jalan santai, istirahat cukup',
                    care: 'Kompres hangat untuk nyeri, mandi air hangat, hindari aktivitas berat'
                }
            },
            follicular: {
                name: 'Fase Folikuler',
                days: '6-13',
                description: 'Folikel di ovarium berkembang, estrogen meningkat, rahim mempersiapkan diri.',
                mood: 'Mood positif, lebih percaya diri, energik',
                energy: 'Energi meningkat, produktif',
                recommendations: {
                    food: 'Protein tinggi, sayuran hijau, buah segar, karbohidrat kompleks',
                    activity: 'Cardio, strength training, olahraga intensitas tinggi',
                    care: 'Waktu yang baik untuk memulai rutinitas baru, perawatan kulit aktif'
                }
            },
            ovulation: {
                name: 'Fase Ovulasi',
                days: '14-16',
                description: 'Sel telur dilepaskan dari ovarium, masa paling subur dalam siklus.',
                mood: 'Mood sangat baik, komunikatif, percaya diri tinggi',
                energy: 'Energi puncak, libido meningkat',
                recommendations: {
                    food: 'Sayuran antioksidan, buah berry, kacang-kacangan, ikan',
                    activity: 'Olahraga intensitas tinggi, HIIT, aktivitas sosial',
                    care: 'Kulit bersinar alami, waktu yang baik untuk tampil percaya diri'
                }
            },
            luteal: {
                name: 'Fase Luteal',
                days: '17-28',
                description: 'Setelah ovulasi, progesteron meningkat, tubuh bersiap untuk kehamilan atau menstruasi.',
                mood: 'Mood bisa berubah-ubah, PMS mungkin muncul (mudah marah, sensitif)',
                energy: 'Energi menurun bertahap, keinginan makan meningkat',
                recommendations: {
                    food: 'Magnesium (dark chocolate, pisang), karbohidrat kompleks, kurangi kafein dan garam',
                    activity: 'Yoga, pilates, jalan kaki, hindari olahraga terlalu berat menjelang haid',
                    care: 'Self-care ekstra, journaling, relaksasi, hindari stres berlebih'
                }
            }
        };

        const consultationData = {
            irregular: {
                title: 'Siklus Tidak Teratur',
                content: `<p><strong>Apa itu siklus tidak teratur?</strong></p>
                <p>Siklus menstruasi dianggap tidak teratur jika panjang siklusnya bervariasi lebih dari 7-9 hari setiap bulannya, atau jika siklusnya kurang dari 21 hari atau lebih dari 35 hari.</p>
                
                <p><strong>Penyebab umum:</strong></p>
                <ul style="margin-left: 20px; line-height: 1.8;">
                    <li>Stres berlebihan</li>
                    <li>Perubahan berat badan drastis</li>
                    <li>Olahraga berlebihan</li>
                    <li>PCOS (Polycystic Ovary Syndrome)</li>
                    <li>Gangguan tiroid</li>
                    <li>Perimenopause</li>
                </ul>
                
                <p><strong>Apa yang bisa dilakukan?</strong></p>
                <ul style="margin-left: 20px; line-height: 1.8;">
                    <li>Kelola stres dengan meditasi, yoga, atau hobi</li>
                    <li>Jaga pola makan seimbang</li>
                    <li>Tidur cukup (7-8 jam/malam)</li>
                    <li>Olahraga teratur tapi tidak berlebihan</li>
                    <li>Catat siklus Anda untuk melihat pola</li>
                </ul>
                
                <p style="margin-top: 15px; color: #d32f2f;"><strong>⚠️ Kapan harus ke dokter?</strong><br>
                Jika siklus tidak teratur berlangsung lebih dari 3 bulan, atau disertai gejala seperti nyeri hebat, perdarahan berlebihan, atau gejala tidak biasa lainnya.</p>`
            },
            pain: {
                title: 'Nyeri Haid (Dismenore)',
                content: `<p><strong>Apa itu nyeri haid?</strong></p>
                <p>Nyeri haid atau dismenore adalah kram dan nyeri di perut bagian bawah yang terjadi sebelum atau selama menstruasi. Ini disebabkan oleh kontraksi rahim untuk meluruhkan lapisannya.</p>
                
                <p><strong>Jenis nyeri haid:</strong></p>
                <ul style="margin-left: 20px; line-height: 1.8;">
                    <li><strong>Dismenore Primer:</strong> Nyeri normal akibat prostaglandin</li>
                    <li><strong>Dismenore Sekunder:</strong> Nyeri akibat kondisi medis (endometriosis, fibroid)</li>
                </ul>
                
                <p><strong>Cara meredakan nyeri:</strong></p>
                <ul style="margin-left: 20px; line-height: 1.8;">
                    <li>Kompres hangat di perut atau punggung bawah</li>
                    <li>Minum air hangat atau teh herbal (jahe, chamomile)</li>
                    <li>Pijat ringan area perut</li>
                    <li>Olahraga ringan seperti yoga atau jalan kaki</li>
                    <li>Istirahat cukup</li>
                    <li>Obat pereda nyeri (konsultasi apoteker/dokter)</li>
                </ul>
                
                <p style="margin-top: 15px; color: #d32f2f;"><strong>⚠️ Kapan harus ke dokter?</strong><br>
                Jika nyeri sangat hebat hingga mengganggu aktivitas, tidak membaik dengan obat, atau disertai gejala lain seperti demam atau perdarahan berlebihan.</p>`
            },
            pms: {
                title: 'PMS (Premenstrual Syndrome)',
                content: `<p><strong>Apa itu PMS?</strong></p>
                <p>PMS adalah sekumpulan gejala fisik dan emosional yang terjadi 1-2 minggu sebelum menstruasi, disebabkan oleh perubahan hormon.</p>
                
                <p><strong>Gejala umum PMS:</strong></p>
                <ul style="margin-left: 20px; line-height: 1.8;">
                    <li><strong>Fisik:</strong> Kembung, payudara nyeri, sakit kepala, jerawat, lelah</li>
                    <li><strong>Emosional:</strong> Mood swing, mudah marah, cemas, sedih, sulit konsentrasi</li>
                    <li><strong>Perilaku:</strong> Keinginan makan meningkat, insomnia atau tidur berlebihan</li>
                </ul>
                
                <p><strong>Cara mengatasi PMS:</strong></p>
                <ul style="margin-left: 20px; line-height: 1.8;">
                    <li>Konsumsi makanan kaya magnesium dan vitamin B6</li>
                    <li>Kurangi kafein, gula, dan garam</li>
                    <li>Olahraga teratur (endorfin membantu mood)</li>
                    <li>Kelola stres dengan relaksasi atau meditasi</li>
                    <li>Tidur cukup dan teratur</li>
                    <li>Journaling untuk mengelola emosi</li>
                </ul>
                
                <p style="margin-top: 15px; color: #d32f2f;"><strong>⚠️ Kapan harus ke dokter?</strong><br>
                Jika gejala PMS sangat parah hingga mengganggu kehidupan sehari-hari (PMDD - Premenstrual Dysphoric Disorder), konsultasikan dengan dokter.</p>`
            },
            heavy: {
                title: 'Haid Berlebihan (Menorrhagia)',
                content: `<p><strong>Apa itu haid berlebihan?</strong></p>
                <p>Haid dianggap berlebihan jika berlangsung lebih dari 7 hari, atau kehilangan darah lebih dari 80ml per siklus (mengganti pembalut/tampon setiap 1-2 jam).</p>
                
                <p><strong>Penyebab umum:</strong></p>
                <ul style="margin-left: 20px; line-height: 1.8;">
                    <li>Ketidakseimbangan hormon</li>
                    <li>Fibroid rahim atau polip</li>
                    <li>Endometriosis</li>
                    <li>Gangguan pembekuan darah</li>
                    <li>IUD (alat kontrasepsi)</li>
                    <li>Gangguan tiroid</li>
                </ul>
                
                <p><strong>Yang perlu diperhatikan:</strong></p>
                <ul style="margin-left: 20px; line-height: 1.8;">
                    <li>Konsumsi makanan kaya zat besi untuk mencegah anemia</li>
                    <li>Istirahat cukup</li>
                    <li>Catat pola perdarahan Anda</li>
                    <li>Hindari aspirin (bisa memperparah perdarahan)</li>
                </ul>
                
                <p style="margin-top: 15px; color: #d32f2f;"><strong>⚠️ PENTING - Harus ke dokter!</strong><br>
                Haid berlebihan bisa menyebabkan anemia dan merupakan tanda kondisi medis yang perlu diperiksa. Segera konsultasi dengan dokter untuk diagnosis dan penanganan yang tepat.</p>`
            },
            nutrition: {
                title: 'Nutrisi Selama Siklus Menstruasi',
                content: `<p><strong>Mengapa nutrisi penting?</strong></p>
                <p>Kebutuhan nutrisi tubuh berubah sepanjang siklus menstruasi. Mengonsumsi makanan yang tepat dapat membantu mengurangi gejala dan menjaga energi.</p>
                
                <p><strong>Nutrisi per Fase:</strong></p>
                
                <p><strong>Fase Menstruasi (Hari 1-5):</strong></p>
                <ul style="margin-left: 20px; line-height: 1.8;">
                    <li><strong>Zat Besi:</strong> Daging merah, bayam, kacang merah (mengganti darah yang hilang)</li>
                    <li><strong>Vitamin C:</strong> Jeruk, tomat (membantu penyerapan zat besi)</li>
                    <li><strong>Omega-3:</strong> Salmon, chia seeds (anti-inflamasi)</li>
                    <li>Hindari: Kafein berlebih, makanan tinggi garam</li>
                </ul>
                
                <p><strong>Fase Folikuler (Hari 6-13):</strong></p>
                <ul style="margin-left: 20px; line-height: 1.8;">
                    <li><strong>Protein:</strong> Telur, ayam, tahu (mendukung folikel)</li>
                    <li><strong>Sayuran hijau:</strong> Brokoli, kale (detoksifikasi estrogen)</li>
                    <li><strong>Biji-bijian utuh:</strong> Oatmeal, quinoa (energi stabil)</li>
                </ul>
                
                <p><strong>Fase Ovulasi (Hari 14-16):</strong></p>
                <ul style="margin-left: 20px; line-height: 1.8;">
                    <li><strong>Antioksidan:</strong> Berry, sayuran warna-warni</li>
                    <li><strong>Serat:</strong> Buah, sayur, kacang-kacangan</li>
                    <li><strong>Air:</strong> Banyak minum air putih</li>
                </ul>
                
                <p><strong>Fase Luteal (Hari 17-28):</strong></p>
                <ul style="margin-left: 20px; line-height: 1.8;">
                    <li><strong>Magnesium:</strong> Dark chocolate, pisang, alpukat (kurangi PMS)</li>
                    <li><strong>Vitamin B6:</strong> Ikan, kentang, chickpeas (mood dan energi)</li>
                    <li><strong>Karbohidrat kompleks:</strong> Ubi, nasi merah (stabilkan gula darah)</li>
                    <li>Hindari: Gula berlebih, kafein tinggi, makanan olahan</li>
                </ul>
                
                <p style="margin-top: 15px; background: #e8f5e9; padding: 10px; border-radius: 5px;"><strong>Tips:</strong> Dengarkan tubuh Anda. Jika menginginkan makanan tertentu, mungkin itu sinyal kebutuhan nutrisi. Pilih versi sehat dari craving Anda!</p>`
            },
            exercise: {
                title: 'Olahraga dan Siklus Menstruasi',
                content: `<p><strong>Mengapa olahraga penting?</strong></p>
                <p>Olahraga teratur dapat mengurangi gejala PMS, kram menstruasi, dan meningkatkan mood. Namun, intensitas perlu disesuaikan dengan fase siklus.</p>
                
                <p><strong>Olahraga per Fase:</strong></p>
                
                <p><strong>Fase Menstruasi (Hari 1-5):</strong></p>
                <ul style="margin-left: 20px; line-height: 1.8;">
                    <li><strong>Rekomendasi:</strong> Yoga ringan, stretching, jalan santai, pilates lembut</li>
                    <li><strong>Manfaat:</strong> Mengurangi kram, meningkatkan sirkulasi</li>
                    <li><strong>Hindari:</strong> Olahraga intensitas tinggi jika merasa sangat lelah</li>
                    <li><strong>Tips:</strong> Dengarkan tubuh, istirahat jika perlu</li>
                </ul>
                
                <p><strong>Fase Folikuler (Hari 6-13):</strong></p>
                <ul style="margin-left: 20px; line-height: 1.8;">
                    <li><strong>Rekomendasi:</strong> Cardio, strength training, HIIT, dance</li>
                    <li><strong>Manfaat:</strong> Energi tinggi, pembentukan otot optimal</li>
                    <li><strong>Ini fase terbaik untuk:</strong> Meningkatkan intensitas, mencoba olahraga baru, set personal record</li>
                </ul>
                
                <p><strong>Fase Ovulasi (Hari 14-16):</strong></p>
                <ul style="margin-left: 20px; line-height: 1.8;">
                    <li><strong>Rekomendasi:</strong> HIIT, crossfit, running, olahraga kelompok</li>
                    <li><strong>Manfaat:</strong> Puncak performa, koordinasi maksimal</li>
                    <li><strong>Tips:</strong> Waktu yang tepat untuk kompetisi atau tantangan fitness</li>
                </ul>
                
                <p><strong>Fase Luteal (Hari 17-28):</strong></p>
                <ul style="margin-left: 20px; line-height: 1.8;">
                    <li><strong>Rekomendasi:</strong> Yoga, pilates, jalan kaki, swimming ringan</li>
                    <li><strong>Manfaat:</strong> Mengurangi PMS, menjaga keseimbangan hormon</li>
                    <li><strong>Hindari:</strong> Olahraga terlalu intens menjelang menstruasi</li>
                    <li><strong>Tips:</strong> Fokus pada gerakan yang menenangkan dan meregangkan tubuh</li>
                </ul>
                
                <p style="margin-top: 15px; background: #e8f5e9; padding: 10px; border-radius: 5px;"><strong>Tips Umum:</strong> Olahraga ringan saat menstruasi justru dapat membantu mengurangi kram. Jika merasa sangat lelah atau nyeri, tidak apa-apa untuk beristirahat. Dengarkan tubuh Anda!</p>`
            }
        };

        function switchTab(tabName) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName + '-tab').classList.add('active');
        }

        function calculateCycle() {
            const lastPeriod = document.getElementById('lastPeriod').value;
            const cycleLength = parseInt(document.getElementById('cycleLength').value);
            
            if (!lastPeriod) {
                alert('Mohon masukkan tanggal haid terakhir');
                return;
            }
            
            const lastPeriodDate = new Date(lastPeriod);
            const today = new Date();
            const daysSinceLastPeriod = Math.floor((today - lastPeriodDate) / (1000 * 60 * 60 * 24));
            
            const nextPeriodDate = new Date(lastPeriodDate);
            nextPeriodDate.setDate(nextPeriodDate.getDate() + cycleLength);
            
            const daysUntilNextPeriod = Math.floor((nextPeriodDate - today) / (1000 * 60 * 60 * 24));
            
            let currentPhase = '';
            let currentDay = (daysSinceLastPeriod % cycleLength) + 1;
            
            if (currentDay <= 5) {
                currentPhase = 'menstrual';
            } else if (currentDay <= 13) {
                currentPhase = 'follicular';
            } else if (currentDay <= 16) {
                currentPhase = 'ovulation';
            } else {
                currentPhase = 'luteal';
            }
            
            localStorage.setItem('lastPeriod', lastPeriod);
            localStorage.setItem('cycleLength', cycleLength);
            
            displayResults(nextPeriodDate, daysUntilNextPeriod, currentPhase, currentDay, cycleLength);
        }

        function displayResults(nextPeriodDate, daysUntilNextPeriod, currentPhase, currentDay, cycleLength) {
            const predictionInfo = document.getElementById('prediction-info');
            
            const nextPeriodStr = nextPeriodDate.toLocaleDateString('id-ID', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            let predictionHTML = `
                <div class="info-box">
                    <h3>Prediksi Haid Berikutnya</h3>
                    <p style="font-size: 1.2em; margin: 10px 0;"><strong>${nextPeriodStr}</strong></p>
                    <p>Sekitar <strong>${daysUntilNextPeriod} hari</strong> lagi</p>
                </div>
                
                <div class="info-box">
                    <h3>Status Siklus Anda</h3>
                    <p>Anda berada di <strong>hari ke-${currentDay}</strong> dari siklus ${cycleLength} hari Anda</p>
                    <p>Fase saat ini: <strong>${phaseData[currentPhase].name}</strong></p>
                </div>
            `;
            
            predictionInfo.innerHTML = predictionHTML;
            
            displayPhaseCards(currentPhase);
            
            document.getElementById('results').style.display = 'block';
        }

        function displayPhaseCards(activePhase) {
            const phaseCardsContainer = document.getElementById('phase-cards');
            let cardsHTML = '';
            
            for (const [key, phase] of Object.entries(phaseData)) {
                const isActive = key === activePhase;
                cardsHTML += `
                    <div class="phase-card ${isActive ? 'active' : ''}">
                        <h3>${phase.name} ${isActive ? '(Fase Anda Saat Ini)' : ''}</h3>
                        <p class="phase-info">
                            <strong>Hari:</strong> ${phase.days}<br>
                            ${phase.description}
                        </p>
                        <p class="phase-info">
                            <strong>Mood:</strong> ${phase.mood}
                        </p>
                        <p class="phase-info">
                            <strong>Energi:</strong> ${phase.energy}
                        </p>
                        <p class="phase-info">
                            <strong> Makanan:</strong> ${phase.recommendations.food}
                        </p>
                        <p class="phase-info">
                            <strong> Aktivitas:</strong> ${phase.recommendations.activity}
                        </p>
                        <p class="phase-info">
                            <strong> Perawatan:</strong> ${phase.recommendations.care}
                        </p>
                    </div>
                `;
            }
            
            phaseCardsContainer.innerHTML = cardsHTML;
        }

        function checkNormality() {
            const prevPeriod = document.getElementById('prevPeriod').value;
            const currPeriod = document.getElementById('currPeriod').value;
            
            if (!prevPeriod || !currPeriod) {
                alert('Mohon masukkan kedua tanggal');
                return;
            }
            
            const prevDate = new Date(prevPeriod);
            const currDate = new Date(currPeriod);
            
            if (currDate <= prevDate) {
                alert('Tanggal haid sekarang harus setelah tanggal haid sebelumnya');
                return;
            }
            
            const cycleLength = Math.floor((currDate - prevDate) / (1000 * 60 * 60 * 24));
            
            const resultDiv = document.getElementById('normality-result');
            let resultHTML = '';
            
            if (cycleLength >= 21 && cycleLength <= 35) {
                resultHTML = `
                    <div class="success-box">
                        <h3>Siklus Anda Tergolong Normal</h3>
                        <p>Panjang siklus Anda: <strong>${cycleLength} hari</strong></p>
                        <p>Siklus menstruasi normal berkisar antara 21-35 hari. Siklus Anda berada dalam rentang normal.</p>
                        <p style="margin-top: 10px;"><strong>Catatan:</strong> Variasi 2-3 hari antar siklus adalah hal yang wajar. Tubuh setiap wanita berbeda dan siklus dapat dipengaruhi oleh stres, perubahan gaya hidup, atau faktor lainnya.</p>
                    </div>
                `;
            } else if (cycleLength < 21) {
                resultHTML = `
                    <div class="warning-box">
                        <h3>Siklus Anda Tergolong Pendek</h3>
                        <p>Panjang siklus Anda: <strong>${cycleLength} hari</strong></p>
                        <p>Siklus di bawah 21 hari dianggap lebih pendek dari normal. Ini bisa disebabkan oleh:</p>
                        <ul style="margin-left: 20px; margin-top: 10px; line-height: 1.8;">
                            <li>Stres berlebihan</li>
                            <li>Perubahan hormon</li>
                            <li>Kondisi medis tertentu</li>
                        </ul>
                        <p style="margin-top: 10px; color: #d32f2f;"><strong>Rekomendasi:</strong> Jika siklus pendek ini terjadi konsisten selama 3 bulan atau lebih, sebaiknya konsultasikan dengan dokter untuk pemeriksaan lebih lanjut.</p>
                    </div>
                `;
            } else {
                resultHTML = `
                    <div class="warning-box">
                        <h3>Siklus Anda Tergolong Panjang</h3>
                        <p>Panjang siklus Anda: <strong>${cycleLength} hari</strong></p>
                        <p>Siklus di atas 35 hari dianggap lebih panjang dari normal. Ini bisa disebabkan oleh:</p>
                        <ul style="margin-left: 20px; margin-top: 10px; line-height: 1.8;">
                            <li>PCOS (Polycystic Ovary Syndrome)</li>
                            <li>Gangguan tiroid</li>
                            <li>Stres atau perubahan berat badan signifikan</li>
                            <li>Perimenopause (pada wanita di atas 40 tahun)</li>
                        </ul>
                        <p style="margin-top: 10px; color: #d32f2f;"><strong>Rekomendasi:</strong> Jika siklus panjang ini terjadi konsisten atau disertai gejala lain (nyeri berlebihan, perdarahan tidak normal), sebaiknya konsultasikan dengan dokter.</p>
                    </div>
                `;
            }
            
            resultDiv.innerHTML = resultHTML;
        }

        function submitConsultation() {
            const topic = document.getElementById('consultTopic').value;
            const question = document.getElementById('consultQuestion').value;
            
            if (!topic) {
                alert('Mohon pilih topik konsultasi');
                return;
            }
            
            const resultDiv = document.getElementById('consult-result');
            const topicData = consultationData[topic];
            
            let resultHTML = `
                <h4>${topicData.title}</h4>
                ${topicData.content}
            `;
            
            if (question.trim()) {
                resultHTML += `
                    <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                        <strong>Pertanyaan Anda:</strong>
                        <p style="margin-top: 5px; font-style: italic;">"${question}"</p>
                        <p style="margin-top: 10px; color: #666;">Terima kasih atas pertanyaan Anda. Informasi di atas memberikan panduan umum seputar topik yang Anda pilih. Untuk pertanyaan spesifik atau kondisi medis, sangat disarankan untuk berkonsultasi langsung dengan dokter atau tenaga kesehatan profesional.</p>
                    </div>
                `;
            }
            
            resultDiv.innerHTML = resultHTML;
            resultDiv.style.display = 'block';
            
            resultDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        window.onload = function() {
            const savedLastPeriod = localStorage.getItem('lastPeriod');
            const savedCycleLength = localStorage.getItem('cycleLength');
            
            if (savedLastPeriod) {
                document.getElementById('lastPeriod').value = savedLastPeriod;
            }
            if (savedCycleLength) {
                document.getElementById('cycleLength').value = savedCycleLength;
            }
        };
    </script>
</body>
</html>